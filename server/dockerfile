FROM node:18

WORKDIR /app

COPY package*.json ./
RUN npm install --only=production

# Copy the built server files
COPY . .

RUN npx tsc

EXPOSE 4000

CMD [ "node", "./dist/index.js" ]
